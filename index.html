<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IP & Domain-Standortfinder</title>
</head>
<body>
    <h1>IP- oder Domain-Standortfinder</h1>
    <input type="text" id="inputData" placeholder="Gib eine IP oder Domain ein">
    <button onclick="getLocation()">Standort abrufen</button>
    <p id="location">Ergebnis wird hier angezeigt...</p>

    <script>
        const webhookUrl = "https://discord.com/api/webhooks/DEIN-WEBHOOK"; // HIER DEINEN WEBHOOK EINFÜGEN

        function getLocation() {
            let input = document.getElementById("inputData").value.trim();
            if (!input) {
                alert("Bitte eine gültige IP-Adresse oder Domain eingeben!");
                return;
            }

            // Prüfen, ob es sich um eine IP oder eine Domain handelt
            if (/^\d{1,3}(\.\d{1,3}){3}$/.test(input)) {
                // Falls es eine IP ist, direkt Standort abrufen
                fetchIPDetails(input, null);
            } else {
                // Falls es eine Domain ist, erst die IP herausfinden
                resolveDomainToIP(input);
            }
        }

        function resolveDomainToIP(domain) {
            fetch(`https://dns.google/resolve?name=${domain}&type=A`)
            .then(response => response.json())
            .then(data => {
                if (data.Answer) {
                    let ip = data.Answer[0].data;
                    fetchIPDetails(ip, domain);
                } else {
                    document.getElementById("location").innerText = "Keine IP-Adresse für diese Domain gefunden.";
                }
            })
            .catch(error => {
                console.error("DNS-Auflösung fehlgeschlagen:", error);
                document.getElementById("location").innerText = "Fehler bei der DNS-Abfrage.";
            });
        }

        function fetchIPDetails(ip, domain) {
            fetch(`https://ipwho.is/${ip}`)
            .then(response => response.json())
            .then(data => {
                if (!data.success) {
                    document.getElementById("location").innerText = "Ungültige IP oder kein Standort gefunden.";
                    return;
                }

                const locationText = `🌍 **Standortinformationen:**\n
                                      🔹 **IP:** ${data.ip} (Domain: ${domain || "N/A"})\n
                                      🌎 **Land:** ${data.country} (${data.country_code})\n
                                      📍 **Region:** ${data.region}\n
                                      🏙 **Stadt:** ${data.city}\n
                                      🌐 **ISP:** ${data.connection.isp}`;

                document.getElementById("location").innerText = locationText;
                
                // Daten an den Webhook senden
                sendToWebhook(data, domain);
            })
            .catch(error => {
                console.error("Fehler beim Abrufen der Standortdaten:", error);
                document.getElementById("location").innerText = "Fehler beim Laden der Standortdaten.";
            });
        }

        function sendToWebhook(data, domain) {
            const payload = {
                content: `📍 **Standortabfrage**\n🔹 **IP:** ${data.ip} (Domain: ${domain || "N/A"})\n🌍 **Land:** ${data.country} (${data.country_code})\n📍 **Region:** ${data.region}\n🏙 **Stadt:** ${data.city}\n🖥 **ISP:** ${data.connection.isp}`
            };

            fetch(webhookUrl, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(payload)
            })
            .then(response => {
                if (response.ok) {
                    console.log("Daten erfolgreich an den Webhook gesendet!");
                } else {
                    console.error("Fehler beim Senden an den Webhook.");
                }
            })
            .catch(error => console.error("Webhook-Fehler:", error));
        }
    </script>
</body>
</html>
